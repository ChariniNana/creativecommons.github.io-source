{% from "macros/author_name.html" import render_author_name %}

{% macro render_posts(posts) %}
  {% for post in posts %}
    {% set author = post.parent.parent.children.get('authors').children.get(post.author) %}
    <article class="card entry-post horizontal no-border blog-entry">
      <header>
        <figure class="image blog-image">
        {% if author.about %}
          {% if author.md5_hashed_email %}
          <img class="profile" src="https://secure.gravatar.com/avatar/{{ author.md5_hashed_email }}?size=200"
            alt="gravatar" />
          {% endif %}
        {% endif %}
        </figure>
      </header>
      <div class="blog-content">
        <h4 class="b-header"><a class="blog-title" href="{{ post|url }}">{{ post.title }}</a></h4>
        <span class="blog-author">by <a class="author-name" href="{{ author|url }}">{{ render_author_name(author) }}</a>
          on {{ post.pub_date|dateformat("YYYY-MM-dd") }}</span>
        <!-- TODO : Discuss how to extract an excerpt -->
        <div class="excerpt">
          <!-- {{ post.body| string | truncate(100) }} -->
          Excerpt scelerisque vitae neque, facilisi elit. Gravida diam vel cras lorem a nibh enim et diam.
        </div>
      </div>
  </article>
  {% endfor %}
{% endmacro %}
